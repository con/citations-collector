# DANDI-BIB Collection Configuration
#
# This configuration is for collecting and classifying citations
# for all DANDI Archive dandisets.
#
# Usage:
#   citations-collector discover dandi-bib-collection.yaml
#   citations-collector fetch-pdfs dandi-bib-collection.yaml
#   citations-collector extract-contexts dandi-bib-collection.yaml
#   citations-collector classify dandi-bib-collection.yaml

name: DANDI Archive Citations (Complete)
description: |
  Complete citation collection for all DANDI Archive dandisets.
  Includes citation discovery, PDF acquisition, context extraction,
  and LLM-based relationship classification.
homepage: https://dandiarchive.org

# Output TSV file
output_tsv: citations/data/dandi-citations.tsv

# Source configuration: dynamically import dandisets from DANDI API
source:
  type: dandi
  include_draft: false  # Only published dandisets
  update_items: add     # Add new dandisets, keep existing ones
  # Options:
  #   add  = fetch from API, add new items to YAML, never remove
  #   sync = fetch from API, add new + remove deleted items
  #   (absent) = use items: list below as-is

# Citation discovery configuration
discover:
  sources:
    - crossref        # CrossRef API (primary)
    - opencitations   # OpenCitations COCI
    - datacite        # DataCite Event Data
  email: team@dandiarchive.org  # For CrossRef polite pool

# PDF acquisition configuration
pdfs:
  output_dir: citations/pdfs/
  unpaywall_email: team@dandiarchive.org
  git_annex: true  # Add PDFs to git-annex with metadata

# LLM backend configuration
llm:
  backend: ollama  # ollama | dartmouth | openrouter | openai
  model: qwen2:7b  # For ollama
  # For dartmouth:
  # backend: dartmouth
  # model: anthropic.claude-sonnet-4-5-20250929
  # api_key via ZOTERO_API_KEY envvar

# Classification configuration
classify:
  confidence_threshold: 0.7  # Auto-accept if confidence > 0.7
  review_low_confidence: true  # Interactive review for < threshold

# Zotero sync configuration
zotero:
  group_id: 5774211
  collection_key: UHK47FKX
  # api_key via ZOTERO_API_KEY envvar

# Items list (populated automatically from DANDI API if source.type=dandi)
# Or manually specify:
# items:
#   - item_id: "dandi:000003"
#     item_flavor: "0.210812.1448"
#     item_title: "Allen Institute Openscope - Neuropixels..."
#     item_url: "https://dandiarchive.org/dandiset/000003/0.210812.1448"
#   - item_id: "dandi:000020"
#     item_flavor: "0.210913.1639"
